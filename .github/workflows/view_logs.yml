name: Deploy

on:
  push:

jobs:
  evaluate:
    runs-on: ubuntu-latest
    outputs:
      proceed: ${{ steps.set-result.outputs.proceed }}
    steps:
      - name: Evaluate logic
        id: set-result
        run: |
          # ‚úÖ Change this to 'true' or 'false' as needed
          echo "proceed=true" >> $GITHUB_ENV
          echo "proceed=${{ env.proceed }}"
        env:
          proceed: true  # üëà Yahan 'true' or 'false' set karo
        outputs:
          proceed: ${{ env.proceed }}

  approve:
    needs: evaluate
    if: needs.evaluate.outputs.proceed == 'false'
    runs-on: ubuntu-latest
    environment:
      name: manual-approval
      url: https://github.com
    steps:
      - name: Wait for manual approval
        run: echo "‚è≥ Waiting for manual approval..."

  deploy:
    needs: [evaluate, approve]
    if: needs.evaluate.outputs.proceed == 'true' || needs.approve.result == 'success'
    runs-on: ubuntu-latest
    steps:
      - name: Deploying...
        run: echo "üöÄ Deploying View Logs Action!"
