name: Deploy

on:
  push:
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment: ${{ steps.set-var.outputs.env }}  # Dynamically require approval only if needed
    steps:
      - name: ðŸ§¾ Checkout code
        uses: actions/checkout@v3

      - name: ðŸ“¦ Set proceed flag
        id: set-var
        run: |
          # ðŸ‘‡ Just change this to true/false as needed
          proceed=true

          if [ "$proceed" = "false" ]; then
            echo "env=manual-approval" >> $GITHUB_OUTPUT
          else
            echo "env=" >> $GITHUB_OUTPUT
          fi
          echo "proceed=$proceed" >> $GITHUB_OUTPUT

      - name: âœ… Proceeding after optional approval
        run: echo "ðŸš€ Deployment continues..."

      - name: ðŸ”” Echo Message 1
        run: echo "Message 1"
      - name: ðŸ”” Echo Message 2
        run: echo "Message 2"
      - name: ðŸ”” Echo Message 3
        run: echo "Message 3"
