name: Deploy

on:
  push:

jobs:
  evaluate:
    runs-on: ubuntu-latest
    outputs:
      proceed: ${{ steps.set-result.outputs.proceed }}
    steps:
      - name: Evaluate logic
        id: set-result
        run: |
          # Change this to true/false based on your condition
          echo "proceed=true" >> $GITHUB_ENV
          echo "::set-output name=proceed::false"

  approve:
    needs: evaluate
    if: needs.evaluate.outputs.proceed == 'false'
    runs-on: ubuntu-latest
    environment:
      name: manual-approval
      url: https://github.com
    steps:
      - name: Wait for approval
        run: echo "‚è≥ Waiting for manual approval..."

  deploy:
    needs: [evaluate, approve]
    if: needs.evaluate.outputs.proceed == 'true' || needs.approve.result == 'success'
    runs-on: ubuntu-latest
    steps:
      - name: Deploying...
        run: echo "üöÄ Deploying View Logs Action!"
